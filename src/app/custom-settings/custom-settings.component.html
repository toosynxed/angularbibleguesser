<div class="container">
  <header>
    <div class="header-controls">
      <button class="secondary-button" (click)="goBack()" title="Back to Home">â€¹ Home</button>
    </div>
    <h1>Custom Game</h1>
    <p>Set up your game, then start playing!</p>
  </header>

  <main class="settings-form">
    <div class="form-group">
      <label for="rounds">Number of Rounds</label>
      <input id="rounds" type="number" [(ngModel)]="settings.rounds" min="1" max="50">
    </div>

    <div class="form-group">
      <label for="contextSize">Context Verses (0-250)</label>
      <input id="contextSize" type="range" [(ngModel)]="settings.contextSize" min="0" max="250">
      <span>{{ settings.contextSize }}</span>
    </div>

    <div class="form-group">
      <label for="timeLimit">Time Limit</label>
      <select id="timeLimit" [(ngModel)]="settings.timeLimit">
        <option *ngFor="let option of timeOptions" [value]="option.value">{{ option.label }}</option>
      </select>
    </div>

    <div class="form-group">
      <label>Included Books ({{ settings.books.length }} / {{ allBooks.length }})</label>
      <div class="book-selection-container">
        <div *ngFor="let group of bookGroups" class="book-group">
          <h4 (click)="toggleBookGroup(group)">{{ group.groupName }} (Click to select/unselect all)</h4>
          <div class="book-grid">
            <div *ngFor="let book of group.books"
                 class="book-item"
                 [class.selected]="settings.books.includes(book)"
                 (click)="toggleBook(book)">
              {{ book }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="actions">
      <button class="start-button" (click)="startGame()">Start Custom Game</button>
    </div>
  </main>
</div>
